<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Update NeedIt Records">30feb30d2f40f010e2a5d5072799b63b</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"a231016f79d34dd9a2a7c23c24ef84e2","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"a231016f79d34dd9a2a7c23c24ef84e2"}],"goals":[{"name":"primary","trigger_id":"a231016f79d34dd9a2a7c23c24ef84e2","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"I can help you find and update NeedIt records for a type of request.\", vaContext.getRequesterLang())"},"id":"afad3777ed894bd8841f96d2563209fa","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Ask again when you need to update other NeedIt records.\", vaContext.getRequesterLang())"},"id":"abb23fb0f7d7448e8098d4070cc5b93c","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"5974643dd54541b2a7678af91a4954f7","name":"Needit Type","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"3078d7a19ff24739be4a1fee402e2e45","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Which type of NeedIt record would you like to view?\", vaContext.getRequesterLang())"},"acknowledgement":{"type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n})()\n"},"confirmation":{"type":"String","mode":"string","value":""},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"ReferenceChoiceInputPrompt","mode":"glide_record","id":"d776b7e73e034ff591cd7e5f4fae8cc3","name":"Needit List","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"9391d62fadf042a6bf7a751439cd3a98","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Select a Needit record to view\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"simple","no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"You have no open NeedIt records.\", vaContext.getRequesterLang())"},"condition":{"type":"Condition","mode":"glide_query","value":"active=true^u_request_typeLIKE{{vaInputs.needit_type}}^u_requested_for={{vaInputs.user}}^state!=8"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"9391d62fadf042a6bf7a751439cd3a98","fields":["short_description","state","u_when_needed"],"id":"c76bd7cc8653461dae9cf797ee62d231","name":"NeedIt Card","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"9246d4069d574dd2afe68fdf628a25f4","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"c07fa1a34f514fffbe6879b1cbd18d94","name":"Yes"}],"id":"52648993da1147febf3c9a825aeb2c74","goal_id":"primary"},{"type":"InputPrompt","variable_id":"989715c83ab44cb7a270ade384408829","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Would you like to view another NeedIt Record?\", vaContext.getRequesterLang())"},"confirmation":{"type":"String","mode":"string","value":""},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"03f7d5d9932b4681a5922e63c2fbd57a","name":"Search Again","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"342a99e3fcd34b77901582c8091ea469","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"When do you need the NeedIt completed?\", vaContext.getRequesterLang())"},"acknowledgement":{"type":"String","mode":"string","value":""},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"b8c086227c6d443da90f5d8851807cc4","name":"New When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"9391d62fadf042a6bf7a751439cd3a98","id":"13940c64e31f4cabbf1581c2fc17d3e3","name":"Change When Needed Date","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"9391d62fadf042a6bf7a751439cd3a98","fields":["short_description","state","u_when_needed"],"id":"a3b2da0da6854c329a6fecf627d7461a","name":"Updated Info","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"glide_query","value":""}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"Date","expression":{"type":"Applicability","mode":"query","value":"update_record_choice=when"},"id":"a3336ec40dfb464ab02e8873e034f312","name":"Date"},{"type":"Branch","label":"Cancel","expression":{"type":"Applicability","mode":"query","value":"update_record_choice=cstate"},"id":"4a1d9e100d684518a0f57e984e5314f5","name":"Cancel"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"update_record_choice=no"},"id":"de76a09f174b4d03a912e6b2a83056ea","name":"Nothing"}],"id":"39753bde401642b4af6a7c9dc2de9b4e","goal_id":"primary"},{"type":"CRUDAction","mode":"update","query":"state=8","variable_id":"9391d62fadf042a6bf7a751439cd3a98","id":"38beb9b6170f4389bae13f855badd3de","name":"Cancel Ticket","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"bd44a4dc89b34d94ae71c681db5f9b86","name":"Update Record choice","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"e2fd96f7a1ef46c8a60d1064d733b8d4","message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"Do you want to update the record?\", vaContext.getRequesterLang())"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"Decision","name":"Search count ?","branches":[{"type":"Branch","label":"search &lt;= 3 ","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    /* Return true or false to indicate the branch condition's applicability.\n       For example:\n\n       var applies = vaInputs.first_name == 'Bill' ? true : false;\n       return applies;\n    */\n  if (vaVars.search_count &lt;= 3)\n\t    return true;\n else\n\t  return false;\n\n})()\n"},"id":"43a324af2f06468a8fc80fa192cf4b8e","name":"search &lt;= 3 "},{"type":"Branch","label":"More than 3 search","expression":{"type":"Applicability","mode":"query","value":""},"id":"74c193c2a93c49e3ac958cdb681c2bde","name":"More than 3 search"}],"id":"5868107f562e4c3b8143a8e52636c12f","goal_id":"primary"},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n\n    \t    vaVars.search_count = vaVars.search_count + 1;\n\n})()\n","id":"1530177d299e4836a31713b38afed792","name":"Update search_count","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    /* Return a quoted string.  For example:\n\n       if (vaInputs.first_name == 'Bill') {\n           return gs.getMessage('hi there {0}', [vaInputs.first_name]);\n       } else {\n           return gs.getMessage('how are you {0}', [vaInputs.last_name]);\n       }\n    */\n    if (vaSystem.isLiveAgentAvailable()){\n\t        return 'You have reached your NeedIt search limit. I will transfer you to a live agent for assistance.'\n\t    } else {\n\t        return 'You have reached your NeedIt search limit. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n\t    }\n})()\n"},"id":"720e35bbd4354e23a4fd63bd5bfc350f","name":"Limit Reached","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"secure":false},{"type":"ScriptedAction","script":"(function execute() {\n    /* Code your scripted action here. For example, you might update a\n       record based on conditional logic:\n\n        if (vaVars.my_flag == 'say hello') {\n            gs.info('hi there');\n        } else {\n            gs.info('bye now');\n        }\n    */\n\n    vaSystem.connectToAgent();\n})()\n","id":"c7ca7169e86d4f42afbf70c7f96a435a","name":"Transfer to Agent","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}}],"edges":[{"type":"Edge","source_node_id":"5868107f562e4c3b8143a8e52636c12f","target_node_id":"5974643dd54541b2a7678af91a4954f7","branch_id":"43a324af2f06468a8fc80fa192cf4b8e","id":"8cbe030149a949c39814c2a8fd70b284","name":"43a324af2f06468a8fc80fa192cf4b8e"},{"type":"Edge","source_node_id":"bd44a4dc89b34d94ae71c681db5f9b86","target_node_id":"39753bde401642b4af6a7c9dc2de9b4e","id":"09a9c3d5140848ed9e58a4582824aa2b"},{"type":"Edge","source_node_id":"afad3777ed894bd8841f96d2563209fa","target_node_id":"5974643dd54541b2a7678af91a4954f7","id":"b88b8d820766489cb48b4a8c0857123d"},{"type":"Edge","source_node_id":"5974643dd54541b2a7678af91a4954f7","target_node_id":"d776b7e73e034ff591cd7e5f4fae8cc3","id":"bb7c8087cff348a1bb982bc3e29713f7"},{"type":"Edge","source_node_id":"d776b7e73e034ff591cd7e5f4fae8cc3","target_node_id":"c76bd7cc8653461dae9cf797ee62d231","id":"2f84f5ff6bf548b39dfc36c772ce909b"},{"type":"Edge","source_node_id":"52648993da1147febf3c9a825aeb2c74","target_node_id":"abb23fb0f7d7448e8098d4070cc5b93c","branch_id":"9246d4069d574dd2afe68fdf628a25f4","id":"5afcaacda6944633ac47f301b3733a0f","name":"9246d4069d574dd2afe68fdf628a25f4"},{"type":"Edge","source_node_id":"03f7d5d9932b4681a5922e63c2fbd57a","target_node_id":"52648993da1147febf3c9a825aeb2c74","id":"f253a976d7974c6ea6740b7c9695dd7b"},{"type":"Edge","source_node_id":"b8c086227c6d443da90f5d8851807cc4","target_node_id":"13940c64e31f4cabbf1581c2fc17d3e3","id":"e3d1d74a3dac491ab778abe8cf3fe5b8"},{"type":"Edge","source_node_id":"13940c64e31f4cabbf1581c2fc17d3e3","target_node_id":"a3b2da0da6854c329a6fecf627d7461a","id":"a975ae6abed14cfb9a1b8f83446fa35b"},{"type":"Edge","source_node_id":"a3b2da0da6854c329a6fecf627d7461a","target_node_id":"03f7d5d9932b4681a5922e63c2fbd57a","id":"1e0c18939c6d413894656ae0d687500c"},{"type":"Edge","source_node_id":"39753bde401642b4af6a7c9dc2de9b4e","target_node_id":"b8c086227c6d443da90f5d8851807cc4","branch_id":"a3336ec40dfb464ab02e8873e034f312","id":"b0bed15a1e924a309357c027c7171779","name":"a3336ec40dfb464ab02e8873e034f312"},{"type":"Edge","source_node_id":"39753bde401642b4af6a7c9dc2de9b4e","target_node_id":"38beb9b6170f4389bae13f855badd3de","branch_id":"4a1d9e100d684518a0f57e984e5314f5","id":"b33acc39dc3542f1b7ace3343b97738f","name":"4a1d9e100d684518a0f57e984e5314f5"},{"type":"Edge","source_node_id":"38beb9b6170f4389bae13f855badd3de","target_node_id":"a3b2da0da6854c329a6fecf627d7461a","id":"1b84509fc3df41bc8244df8172424a6d"},{"type":"Edge","source_node_id":"39753bde401642b4af6a7c9dc2de9b4e","target_node_id":"03f7d5d9932b4681a5922e63c2fbd57a","branch_id":"de76a09f174b4d03a912e6b2a83056ea","id":"1e8d840674e243b0aa5655fa90ed72e8","name":"de76a09f174b4d03a912e6b2a83056ea"},{"type":"Edge","source_node_id":"c76bd7cc8653461dae9cf797ee62d231","target_node_id":"bd44a4dc89b34d94ae71c681db5f9b86","id":"dd18149d90ad46668c189bf1191f6319"},{"type":"Edge","source_node_id":"52648993da1147febf3c9a825aeb2c74","target_node_id":"1530177d299e4836a31713b38afed792","branch_id":"c07fa1a34f514fffbe6879b1cbd18d94","id":"1d6b30d185f04bfeb0b3c6d8ec148766","name":"c07fa1a34f514fffbe6879b1cbd18d94"},{"type":"Edge","source_node_id":"1530177d299e4836a31713b38afed792","target_node_id":"5868107f562e4c3b8143a8e52636c12f","id":"6055d5f5d93643988d80b7fdc3256501"},{"type":"Edge","source_node_id":"5868107f562e4c3b8143a8e52636c12f","target_node_id":"720e35bbd4354e23a4fd63bd5bfc350f","branch_id":"74c193c2a93c49e3ac958cdb681c2bde","id":"57a4714689094d59a1db587001182d2b","name":"74c193c2a93c49e3ac958cdb681c2bde"},{"type":"Edge","source_node_id":"720e35bbd4354e23a4fd63bd5bfc350f","target_node_id":"c7ca7169e86d4f42afbf70c7f96a435a","id":"9a72dab24122485cb20d4e763c06a6de"},{"type":"Edge","source_node_id":"c7ca7169e86d4f42afbf70c7f96a435a","target_node_id":"abb23fb0f7d7448e8098d4070cc5b93c","id":"1cecd273ec5c4b40b09657882b281fed"}],"id":"primary"}],"script_variables":[{"type":"String","name":"LiveAgent_application","value":{"type":"String","mode":"string"},"id":"1757f81a7f804db6ac3e0101b482075c","formatType":"text","secure":false,"sensitive":false},{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"e5ac6e609a2f41fa9f93e5f4b40515d8","formatType":"text","secure":false,"sensitive":false}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"current-user","name":"user","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"3078d7a19ff24739be4a1fee402e2e45","name":"needit_type","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"x_58872_needit_needit","reference_qualifier_condition":"active=true^u_request_typeLIKE{{vaInputs.needit_type}}^u_requested_for={{vaInputs.user}}^state!=8","id":"9391d62fadf042a6bf7a751439cd3a98","name":"needit_list","formatType":"text","secure":false,"sensitive":false},{"type":"True/False","id":"989715c83ab44cb7a270ade384408829","name":"search_again","formatType":"text","secure":false,"sensitive":false},{"type":"Date/Time","mode":"date_time","id":"342a99e3fcd34b77901582c8091ea469","name":"new_when_needed_date","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"","id":"b0feebdd799d4de2b4c59eea8602b08a","name":"change_when_needed_date","formatType":"text","secure":false,"sensitive":false},{"type":"Choice","choices":[{"name":"Delivery Date","element":"when"},{"name":"Cancel Request ","element":"cstate"},{"name":"Nothing","element":"no"}],"id":"e2fd96f7a1ef46c8a60d1064d733b8d4","name":"update_record_choice","formatType":"text","secure":false,"sensitive":false},{"type":"Reference","table":"","id":"2a2d5a8be1fe448eb8814004b3d3bab2","name":"cancel_ticket","formatType":"text","secure":false,"sensitive":false}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"6ead8e780f603200cd674f8ce1050ed1","domain":"global","topic_type":"STANDARD","channels":[],"id":"a8d75d7c2f847010e2a5d5072799b610","name":"_PRVW__fcfeb30d3540f010124ef38eb8635539","key_phrases":["Update NeedIt Records","Needit Request"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_categories":[{"name":null,"visible":false,"sysId":"526cb0702f447010e2a5d5072799b671"}],"triggerable_by_notification":false,"auto_resolution_enabled":false,"library":false,"nluMapping":"[]"}</design_definition>
        <design_topic_id>a8d75d7c2f847010e2a5d5072799b610</design_topic_id>
        <name>_PRVW__fcfeb30d3540f010124ef38eb8635539</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-05-09 20:39:44</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>b8fe3f812f80f010e2a5d5072799b6d5</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt" source="x_58872_needit">6ead8e780f603200cd674f8ce1050ed1</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt">6ead8e780f603200cd674f8ce1050ed1</sys_scope>
        <sys_update_name>sys_cb_design_topic_b8fe3f812f80f010e2a5d5072799b6d5</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2021-05-09 20:39:44</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
